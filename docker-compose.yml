version: "2.2"

services:
    tasker:
        build: tasker
        restart: unless-stopped
        environment:
          - TWITTER_KEY
          - TWITTER_SECRET
          - URLSCAN_KEY
        depends_on:
          - redis
    certstream:
        build: certstream
        restart: unless-stopped
        environment:
          - POSTGRES_DB
          - POSTGRES_PASSWORD
        depends_on:
          - postgres
    redis:
        image: redis:alpine
        restart: unless-stopped
        volumes:
          - ./data/redis:/data
    postgres:
        build: postgres
        restart: unless-stopped
        environment:
          - POSTGRES_DB
          - POSTGRES_PASSWORD
        volumes:
          - ./data/postgres:/var/lib/postgresql/data
